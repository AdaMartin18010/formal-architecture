# 范畴理论 · 核心概念

## 2.1 定义

- 范畴 Category：由对象 Ob(C) 与态射 Hom_C(X,Y) 组成，满足态射合成的结合律与单位元存在。
- 函子 Functor：在对象与态射间保持结构的映射 F: C → D，满足 F(id_X)=id_{F(X)} 与 F(g∘f)=F(g)∘F(f)。
- 自然变换 Natural Transformation：两个函子 F,G: C→D 之间的“态射的态射”，为每个对象 X 给出 η_X: F(X)→G(X)，并对任意 f: X→Y 满足自然性方块可交换。

## 2.2 例子

- 集合范畴 Set：对象为集合，态射为函数，合成为函数复合，单位为恒等函数。
- 预序范畴 Preord：对象为预序集 (P,≤)，态射为单调映射。
- 单对象范畴：由一个对象与其自同态构成的幺半群（范畴与代数的典型对偶例）。

## 2.3 定理与证明

- 定理（函子保持同构）：设 F: C→D 为函子，若 f: X→Y 在 C 中为同构，则 F(f): F(X)→F(Y) 在 D 中亦为同构。

证明：
设 f 可逆，存在 g: Y→X 使得 g∘f = id_X 且 f∘g = id_Y。由函子可加性与合成保持性，得
F(g)∘F(f) = F(g∘f) = F(id_X) = id_{F(X)}，
F(f)∘F(g) = F(f∘g) = F(id_Y) = id_{F(Y)}。
因此 F(f) 在 D 中存在逆元 F(g)，从而 F(f) 为同构。证毕。

## 2.4 极限与余极限（入门）

- 圖式/函子 D: J→C；极限是锥 (L, π_j: L→D(j)) 的终对象，满足对任意锥 (X, ξ_j) 存在唯一 u: X→L 使 ξ_j = π_j ∘ u；余极限对偶（共锥初对象）。
- 示例：
  - 终对象为空图式的极限；积 X×Y 为两投影构成图的极限；拉回为“并行箭头”图的极限。
- 泛性质唯一性：若 (L,π) 与 (L',π') 均为 D 的极限，则存在唯一同构 h: L≅L' 保持投影。

证明略要：由二者分别满足的泛性质互相应用，得到 h 与 h^{-1}，并检验互为逆且与投影相容。

## 2.5 伴随函子（入门）

- 定义：函子 F: C→D 与 G: D→C 伴随，记 F ⊣ G，若存在自然同构
  Hom_D(F(X), Y) ≅ Hom_C(X, G(Y))，自然于 X∈Ob(C), Y∈Ob(D)。
- 单位与陪单位：伴随等价于存在 η: Id_C ⇒ G∘F 与 ε: F∘G ⇒ Id_D，使三角恒等式成立：
  (ε_F ∘ Fη) = id_F，(Gε ∘ η_G) = id_G。
- 例子：自由/遗忘伴随，如 U: Mon→Set 的左伴随 F 构造“自由幺半群”。

证明素描（Hom-集自然同构 等价 单位/陪单位）：

- 由自然同构定义 η_X 为 id_{F(X)} 在同构下的像，ε_Y 为 id_{G(Y)} 的逆像；
- 由自然性与同构性质验证三角恒等式；反向亦然。

## 2.6 拉回与推出（Pullback/Pushout）

- 拉回：给定 X→Z ←Y，拉回 P 及投影 p1: P→X, p2: P→Y 使得 f∘p1=g∘p2，且对任意 Q→X, Q→Y 使 f∘u=g∘v，存在唯一 h: Q→P 使 u=p1∘h, v=p2∘h。
  - 在 Set 中：P={(x,y) | f(x)=g(y)}，为“等值对”的集合。
- 推出：给定 X←Z→Y，推出 S 及嵌入 i1: X→S, i2: Y→S 使 i1∘f=i2∘g，且对任意 i1',i2' 存在唯一 h: S→T 使 i1'=h∘i1, i2'=h∘i2。
  - 在 Set 中：S 为不交并 X⊔Y 对 f(z) 与 g(z) 施行等价关系后的商集合。

## 2.7 等化子与余等化子（Equalizer/Coequalizer）

- 等化子：给定 f,g: X⇉Y，等化子 e: E→X 使 f∘e=g∘e，且对任意 u: U→X 满足 f∘u=g∘u，唯一因子化 u=e∘h。
  - 在 Set 中：E={ x∈X | f(x)=g(x) }，e 为包含映射。
- 余等化子：给定 f,g: X⇉Y，余等化子 q: Y→Q 使 q∘f=q∘g，且对任意 v: Y→V 满足 v∘f=v∘g，唯一因子化 v=h∘q。
  - 在 Set 中：Q 为按最小等价关系 ~（令 f(x)~g(x) 闭包）商后的集合。

## 2.8 伴随的典型例子

- 自由/遗忘：F ⊣ U（如 Mon ↔ Set）。Hom_Mon(F(X), M) ≅ Hom_Set(X, U(M))。
- 积/指数伴随：在 CCC 中，有 (-)×A ⊣ (-)^A，体现在 curry/uncurry 的自然同构。
- 极限与右伴随：若 F: C→D 有右伴随 G，则 F 保持余极限，G 保持极限。

## 2.9 练习

1) 证明：在 Set 中，拉回与等化子存在且与上述集合构造一致。
2) 设 U: Grp→Set 为遗忘函子，构造其左伴随 F（自由群），并验证单位/陪单位的三角恒等式。
