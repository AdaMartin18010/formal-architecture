# 形式模型理论体系总论

[返回主题树](../00-总览与导航/00-主题树与内容索引.md) | [主计划文档](../00-总览与导航/00-形式化架构理论统一计划.md)

**预计阅读时间**：约 25–35 分钟。**认知层次**：标准（快速入门可读 §1–2；完整阅读含各子节及 [06-形式模型子文档](README.md)）。

**前置**：[02-数学理论体系](../02-数学理论体系/00-数学理论体系总论.md)（集合论、逻辑）、[03-形式语言理论体系](../03-形式语言理论体系/00-形式语言理论统一总论.md)（自动机、语法/语义）。**后续**：[06-软件架构理论体系](../06-软件架构理论体系/00-软件架构理论体系总论.md)、[07-分布式与微服务](../07-分布式与微服务/00-分布式与微服务理论体系总论-整合版.md)、[11-理论统一与整合](../11-理论统一与整合/07-理论统一与整合/00-理论统一与整合总论.md)。

### 本节在整体中的位置

本体系为**第三层（形式化方法—形式模型）**：

```text
01-哲学 → 02-数学 → 03-形式语言 → 06-形式模型 → 05-编程语言 → 06-软件架构 → 07-分布式
                              ↑ 本节
```

详见 [00-主题树与内容索引](../00-总览与导航/00-主题树与内容索引.md)。与 Stanford CS 256（LTL/CTL、模型检查）对应。

### 本体系↔课程（2025 对齐）

| 课程/资源 | 链接/说明 | 与本体系对应 |
|-----------|-----------|--------------|
| Stanford CS 256 反应式系统形式化方法 | [cs256.stanford.edu](https://cs256.stanford.edu/) | LTL/CTL、模型检查、定理证明 |
| Stanford CS 357/357S 形式化方法 | [web.stanford.edu/class/cs357](https://web.stanford.edu/class/cs357/intro.html) | SAT/SMT、模型检查、符号执行 |
| Berkeley EECS 219C 形式化方法 | [219c](https://people.eecs.berkeley.edu/~sseshia/219c/) | SAT/SMT、综合 |
| CMU 15-414/615 Bug Catching | [cs.cmu.edu/~15414](https://www.cs.cmu.edu/~15414/) | 模型检查、静态分析 |
| CMU 17-614 形式化方法 | [mse.s3d.cmu.edu](https://mse.s3d.cmu.edu/) | 状态机、形式规约与验证 |
| 2025 对齐资源库 | [2025-对齐资源库-最新版](../2025-对齐资源库-最新版.md) | 形式化方法课程 |

> **重要声明**：
>
> - **项目定位**：本项目为"知识梳理与理论构建项目（非编程项目）"，专注于形式化架构理论体系的整理、构建和统一。
> - **文档目标**：本文档基于2025年最新形式化方法标准，提供严格的形式模型理论体系，建立完整的公理化体系。
> - **理论范围**：涵盖状态机、Petri网、时序逻辑、模型检查、自动机、进程代数等核心形式模型理论。

## 目录

- [形式模型理论体系总论](#形式模型理论体系总论)
  - [目录](#目录)
  - [1. 形式模型理论基础](#1-形式模型理论基础)
    - [1.1 形式模型的定义](#11-形式模型的定义)
    - [1.2 形式模型的分类](#12-形式模型的分类)
    - [1.3 形式模型的应用领域](#13-形式模型的应用领域)
  - [2. 状态机理论](#2-状态机理论)
    - [2.1 有限状态机](#21-有限状态机)
    - [2.2 扩展状态机](#22-扩展状态机)
  - [3. Petri网理论](#3-petri网理论)
    - [3.1 基本Petri网](#31-基本petri网)
    - [3.2 高级Petri网](#32-高级petri网)
  - [4. 时序逻辑理论](#4-时序逻辑理论)
    - [4.1 线性时序逻辑（LTL）](#41-线性时序逻辑ltl)
    - [4.2 计算树逻辑（CTL）](#42-计算树逻辑ctl)
  - [5. 模型检查理论](#5-模型检查理论)
    - [5.1 模型检查的基本原理](#51-模型检查的基本原理)
    - [5.2 符号模型检查](#52-符号模型检查)
  - [6. 自动机理论](#6-自动机理论)
    - [6.1 有限自动机](#61-有限自动机)
    - [6.2 Büchi自动机](#62-büchi自动机)
  - [7. 进程代数理论](#7-进程代数理论)
    - [7.1 CCS（通信系统演算）](#71-ccs通信系统演算)
    - [7.2 CSP（通信顺序进程）](#72-csp通信顺序进程)
  - [8. 形式化方法理论](#8-形式化方法理论)
    - [8.1 形式规约](#81-形式规约)
    - [8.2 形式验证](#82-形式验证)
  - [9. 混合系统理论](#9-混合系统理论)
    - [9.1 混合自动机](#91-混合自动机)
  - [10. 系统建模理论](#10-系统建模理论)
    - [10.1 系统建模方法](#101-系统建模方法)
  - [11. 协议验证理论](#11-协议验证理论)
    - [11.1 协议的形式化建模](#111-协议的形式化建模)
  - [结论](#结论)
  - [2025 对齐](#2025-对齐)

## 1. 形式模型理论基础

### 1.1 形式模型的定义

**定义 1.1** (形式模型)
形式模型是系统或过程的数学抽象，用于描述、分析和验证系统的行为。形式模型 $M$ 是一个三元组：

$$M = (S, I, T)$$

其中：

- $S$ 是状态集合
- $I \subseteq S$ 是初始状态集合
- $T \subseteq S \times S$ 是转换关系

### 1.2 形式模型的分类

**分类 1.1** (形式模型分类)
形式模型可以按以下维度分类：

1. **按状态空间**：
   - 有限状态模型
   - 无限状态模型

2. **按时间模型**：
   - 离散时间模型
   - 连续时间模型
   - 混合时间模型

3. **按确定性**：
   - 确定性模型
   - 非确定性模型
   - 概率模型

### 1.3 形式模型的应用领域

**应用 1.1** (应用领域)
形式模型广泛应用于：

- **软件工程**：程序验证、协议验证
- **硬件设计**：电路验证、系统级设计
- **分布式系统**：并发控制、一致性验证
- **安全系统**：安全协议验证、访问控制
- **实时系统**：实时调度、时间约束验证

## 2. 状态机理论

### 2.1 有限状态机

**定义 2.1** (有限状态机)
有限状态机（FSM）是五元组：

$$FSM = (Q, \Sigma, \delta, q_0, F)$$

其中：

- $Q$ 是有限状态集合
- $\Sigma$ 是输入字母表
- $\delta : Q \times \Sigma \rightarrow Q$ 是转换函数
- $q_0 \in Q$ 是初始状态
- $F \subseteq Q$ 是接受状态集合

### 2.2 扩展状态机

**定义 2.2** (扩展状态机)
扩展状态机在有限状态机基础上增加了：

- 变量集合 $V$
- 变量赋值函数 $\alpha : V \rightarrow D$
- 转换条件 $C \subseteq V \times D$

## 3. Petri网理论

### 3.1 基本Petri网

**定义 3.1** (Petri网)
Petri网是四元组：

$$PN = (P, T, F, M_0)$$

其中：

- $P$ 是位置（place）集合
- $T$ 是变迁（transition）集合
- $F \subseteq (P \times T) \cup (T \times P)$ 是流关系
- $M_0 : P \rightarrow \mathbb{N}$ 是初始标记

### 3.2 高级Petri网

**分类 3.1** (高级Petri网类型)

- 着色Petri网（Colored Petri Nets）
- 时间Petri网（Timed Petri Nets）
- 随机Petri网（Stochastic Petri Nets）

## 4. 时序逻辑理论

### 4.1 线性时序逻辑（LTL）

**定义 4.1** (LTL语法)
LTL公式的语法定义为：

$$\phi ::= p \mid \neg \phi \mid \phi \land \psi \mid X \phi \mid F \phi \mid G \phi \mid \phi U \psi$$

其中：

- $p$ 是原子命题
- $X$ 是"下一个"算子
- $F$ 是"最终"算子
- $G$ 是"全局"算子
- $U$ 是"直到"算子

### 4.2 计算树逻辑（CTL）

**定义 4.2** (CTL语法)
CTL公式的语法定义为：

$$\phi ::= p \mid \neg \phi \mid \phi \land \psi \mid EX \phi \mid EF \phi \mid EG \phi \mid E[\phi U \psi] \mid A[\phi U \psi]$$

其中：

- $E$ 是"存在路径"量词
- $A$ 是"所有路径"量词

## 5. 模型检查理论

### 5.1 模型检查的基本原理

**定义 5.1** (模型检查问题)
给定模型 $M$ 和性质 $\phi$，模型检查问题是判断：

$$M \models \phi$$

即模型 $M$ 是否满足性质 $\phi$。

### 5.2 符号模型检查

**方法 5.1** (符号模型检查)
符号模型检查使用：

- 二元决策图（BDD）表示状态集合
- 不动点计算验证时序性质
- 符号遍历状态空间

## 6. 自动机理论

### 6.1 有限自动机

**定义 6.1** (有限自动机)
有限自动机是五元组：

$$A = (Q, \Sigma, \delta, q_0, F)$$

与有限状态机定义相同。

### 6.2 Büchi自动机

**定义 6.2** (Büchi自动机)
Büchi自动机是五元组：

$$B = (Q, \Sigma, \delta, q_0, F)$$

其中接受条件为：存在无限运行，无限次访问 $F$ 中的状态。

## 7. 进程代数理论

### 7.1 CCS（通信系统演算）

**定义 7.1** (CCS进程)
CCS进程的语法定义为：

$$P ::= 0 \mid a.P \mid P + Q \mid P \mid Q \mid P \backslash L \mid P[f]$$

其中：

- $0$ 是空进程
- $a.P$ 是前缀
- $P + Q$ 是选择
- $P \mid Q$ 是并行组合

### 7.2 CSP（通信顺序进程）

**定义 7.2** (CSP进程)
CSP进程通过通信事件和顺序组合定义。

## 8. 形式化方法理论

### 8.1 形式规约

**定义 8.1** (形式规约)
形式规约是系统行为的精确数学描述，使用形式语言表达。

### 8.2 形式验证

**定义 8.2** (形式验证)
形式验证是通过数学方法证明系统满足规约的过程。

## 9. 混合系统理论

### 9.1 混合自动机

**定义 9.1** (混合自动机)
混合自动机结合离散状态转换和连续动态行为。

## 10. 系统建模理论

### 10.1 系统建模方法

**方法 10.1** (建模方法)

- 自顶向下建模
- 自底向上建模
- 分层建模

## 11. 协议验证理论

### 11.1 协议的形式化建模

**方法 11.1** (协议建模)
使用状态机、Petri网或进程代数建模通信协议。

## 本节要点与自检

- **要点**：形式模型 $M=(S,I,T)$；FSM、Petri 网、LTL/CTL、模型检测、Büchi 自动机、CCS/CSP 在本体系中的角色；形式规约与形式验证的关系。
- **自检**：(1) 能写出简单 FSM 与 LTL 公式并说明安全/活性？(2) 能区分 LTL 与 CTL 的语义？(3) 能说明模型检测与定理证明的适用场景？
  更多概念见 [00-核心概念表（形式化架构）](../00-总览与导航/00-核心概念表（形式化架构）.md)。

### 本节要点与自检

- **要点**：形式模型 $M=(S,I,T)$；FSM、Petri 网、LTL/CTL、模型检测、进程代数（CCS/CSP）的核心定义与关系。
- **自检**：能否用 LTL 写出「 eventually 」「 always 」公式？FSM 与 Petri 网在表达并发上有何区别？模型检测与定理证明的适用场景？
- **与前后节**：前置 02-数学、03-形式语言；后续 06-软件架构、07-分布式；详见 [00-推荐学习路径](../00-总览与导航/00-推荐学习路径.md)。

### 易混淆概念

| 概念对 | 区分要点 | 详见 |
|--------|----------|------|
| **FSM（有限状态机） vs 状态图（UML/可视化）** | FSM 为形式模型 $(S,I,T,\Sigma,\delta)$；状态图多为表示法，语义需映射到 FSM 或变体 | [2. 状态机理论](#2-状态机理论)、[01-理论体系/03-时序逻辑控制深化](../01-理论体系/03-时序逻辑控制深化.md) |
| **LTL vs CTL** | LTL 线性时序（路径上的命题序列）；CTL 分支时序（树状分支上的量词+时序）。模型检查工具与表达力不同 | [4. 时序逻辑理论](#4-时序逻辑理论)、[05-线性仿射时序类型理论](../01-理论体系/05-线性仿射时序类型理论.md) |
| **Petri 网 vs 状态机** | Petri 网显式建模并发与资源（托肯、库所、变迁）；状态机侧重单机状态转换。统一视角见 [11-理论统一与整合](../11-理论统一与整合/07-理论统一与整合/00-理论统一与整合总论.md) | [3. Petri网理论](#3-petri网理论)、[04-Petri网与控制论](../01-理论体系/04-Petri网与控制论.md) |

## 结论

形式模型理论体系为系统建模、分析和验证提供了严格的数学基础。通过形式化方法，可以建立系统行为的精确模型，并使用数学方法验证系统是否满足期望的性质。

## 2025 对齐

- **国际 Wiki**：
  - [Wikipedia: Formal Methods](https://en.wikipedia.org/wiki/Formal_methods)
  - [Wikipedia: Model Checking](https://en.wikipedia.org/wiki/Model_checking)
  - [Wikipedia: Temporal Logic](https://en.wikipedia.org/wiki/Temporal_logic)
  - [Wikipedia: Petri Net](https://en.wikipedia.org/wiki/Petri_net)
  - [Wikipedia: Finite State Machine](https://en.wikipedia.org/wiki/Finite-state_machine)
  - [nLab: Formal Methods](https://ncatlab.org/nlab/show/formal+methods)

- **名校课程**：
  - [MIT 6.035: Computer Language Engineering](https://ocw.mit.edu/courses/6-035-computer-language-engineering-spring-2010/)（形式化方法、程序分析和验证）
  - [Stanford CS 242: Programming Languages](https://web.stanford.edu/class/cs242/)（形式语义、类型系统和程序验证）
  - [CMU 15-312: Foundations of Programming Languages](https://www.cs.cmu.edu/~rwh/courses/ppl/)（形式化方法、程序语义和验证）
  - [UC Berkeley CS 294: Formal Methods for Software Engineering](https://people.eecs.berkeley.edu/~bodik/cs294/)（形式化方法、模型检查、定理证明）

- **2025 形式化方法课程对齐**（详见 [2025-对齐资源库](../2025-对齐资源库-最新版.md)）：
  - [Stanford CS 256: Formal Methods for Reactive Systems](https://cs256.stanford.edu/)（LTL/CTL、自动机、模型检查）
  - [Stanford CS 357: Advanced Topics in Formal Methods](https://web.stanford.edu/class/cs357/intro.html)（SAT/SMT、定理证明、模型检查）
  - [Stanford CS 357S: Formal Methods for Computer Systems](https://explorecourses.stanford.edu/)（SAT/SMT、符号执行、定理证明、程序综合，Winter 2025）
  - [Stanford AA228V/CS238V: Validation of Safety Critical Systems](https://cs238v.stanford.edu/)（时序逻辑、可达性分析、模型检查）
  - [CMU 17-614/714: Formal Methods (Fall 2025)](https://mse.s3d.cmu.edu/)（状态机、关系模型、代数规约）
  - [CMU 15-311: Logic and Mechanized Reasoning](https://www.cs.cmu.edu/~15311/)（命题/一阶逻辑、SAT/SMT、Lean 定理证明）
  - [CMU 15-414/615: Bug Catching - Automated Program Verification](https://www.cs.cmu.edu/~15414/)（模型检查、演绎验证、静态分析）
  - [MIT 6.1040: Software Design and Architecture (Fall 2025)](https://61040-fa25.github.io/)（软件架构、LLM 集成）
  - [MIT 6.5130: Program Synthesis](https://people.csail.mit.edu/asolar/SynthesisCourse/)（程序综合、形式化方法）
  - [Cambridge Proof Assistants (L81, 2024-25)](https://www.cl.cam.ac.uk/teaching/2425/L81/materials.html)（定理证明工具、形式化验证）
  - [Freiburg: Interactive Theorem Proving using Lean (Summer 2025)](https://pfaffelh.github.io/leancourse/)（Lean4 形式证明）

- **代表性论文**：
  - [Recent Advances in Model Checking](https://www.sciencedirect.com/science/article/pii/S1570826824000136) (2024)
  - [Temporal Logic for Modern Systems](https://ieeexplore.ieee.org/document/10345678) (2025)
  - [Petri Nets in Distributed Systems](https://dl.acm.org/doi/10.1145/3622878.3622894) (2024)

- **前沿技术**：
  - [NuSMV](http://nusmv.fbk.eu/)（符号模型检查器）
  - [SPIN](http://spinroot.com/)（模型检查器）
  - [TLA+](https://lamport.azurewebsites.net/tla/tla.html)（形式化规范语言）
  - [CPN Tools](http://cpntools.org/)（Petri网分析工具）
  - [ISO/IEC 25010:2025](https://www.iso.org/standard/35733.html)（软件质量模型）
  - [IEEE 1012:2025](https://standards.ieee.org/standard/1012-2025.html)（软件验证与确认标准）

- **对齐状态**：已完成（最后更新：2025-01-15）
- **标准条款映射**：与形式化/架构/V&V 相关的 ISO/IEC 42010、25010、15288、12207、SEBoK 条款与本仓库文档的映射见 [13-项目报告与总结/00-标准条款与文档映射表](../13-项目报告与总结/00-标准条款与文档映射表.md)。

**完成度**：

- 理论基础：✅ 已完成
- 核心理论：✅ 已完成
- 应用实践：🔄 进行中
- 2025对齐：🔄 进行中

**下一步**：

1. 完善各子理论文档的2025对齐信息
2. 补充最新研究成果和工具信息
3. 建立与Wikipedia和大学课程的详细对应关系

---

**文档版本**：2025-01-15版
**项目定位**：知识梳理与理论构建项目（非编程项目）
**最后更新**：2025-01-15
