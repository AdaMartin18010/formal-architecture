# 模型检查理论

[返回主题树](../00-主题树与内容索引.md) | [形式模型理论体系总论](./00-形式模型理论体系总论.md)

> **重要声明**：
>
> - **项目定位**：本项目为"知识梳理与理论构建项目（非编程项目）"，专注于形式化架构理论体系的整理、构建和统一。
> - **文档目标**：本文档基于2025年最新形式化方法标准，提供严格的模型检查理论体系。
> - **理论范围**：涵盖模型检查的基本原理、符号模型检查、有界模型检查等核心理论。

## 目录

- [模型检查理论](#模型检查理论)
  - [目录](#目录)
  - [1. 概述](#1-概述)
  - [2. 理论基础](#2-理论基础)
    - [2.1 模型检查的基本原理](#21-模型检查的基本原理)
    - [2.2 符号模型检查](#22-符号模型检查)
    - [2.3 有界模型检查](#23-有界模型检查)
  - [3. 核心概念](#3-核心概念)
    - [3.1 状态空间](#31-状态空间)
    - [3.2 性质规约](#32-性质规约)
    - [3.3 反例生成](#33-反例生成)
  - [4. 主要方法](#4-主要方法)
    - [4.1 显式状态模型检查](#41-显式状态模型检查)
    - [4.2 符号模型检查方法](#42-符号模型检查方法)
    - [4.3 有界模型检查方法](#43-有界模型检查方法)
  - [5. 模型检查算法深化](#5-模型检查算法深化)
    - [5.1 BDD 符号模型检查算法](#51-bdd-符号模型检查算法)
    - [5.2 SAT 有界模型检查编码](#52-sat-有界模型检查编码)
    - [5.3 抽象精化（CEGAR）](#53-抽象精化cegar)
    - [5.4 课程对齐](#54-课程对齐)
  - [6. 应用案例](#6-应用案例)
    - [6.1 硬件验证](#61-硬件验证)
    - [6.2 软件验证](#62-软件验证)
    - [6.3 协议验证](#63-协议验证)
  - [7. 总结](#7-总结)
  - [2025 对齐](#2025-对齐)

## 1. 概述

模型检查是一种自动化的形式化验证技术，用于验证有限状态系统是否满足给定的时序性质。模型检查通过系统地探索系统的状态空间来验证性质。

## 2. 理论基础

### 2.1 模型检查的基本原理

**定义 2.1** (模型检查问题)
给定模型 $M$ 和性质 $\phi$，模型检查问题是判断：

$$M \models \phi$$

即模型 $M$ 是否满足性质 $\phi$。

**定理 2.1** (模型检查的复杂性)
对于有限状态系统，模型检查问题是可判定的，但状态空间爆炸是主要挑战。

### 2.2 符号模型检查

**定义 2.2** (符号模型检查)
符号模型检查使用：

- 二元决策图（BDD）表示状态集合
- 不动点计算验证时序性质
- 符号遍历状态空间

**方法 2.1** (符号模型检查算法)

1. 将模型转换为符号表示
2. 将性质转换为不动点计算
3. 计算不动点
4. 检查初始状态是否在不动点中

### 2.3 有界模型检查

**定义 2.3** (有界模型检查)
有界模型检查（BMC）在有限路径长度内检查性质：

$$M \models_k \phi$$

其中 $k$ 是路径长度界限。

**方法 2.2** (BMC方法)

1. 将问题转换为SAT问题
2. 使用SAT求解器求解
3. 如果找到反例，则性质不满足
4. 如果未找到反例，增加界限继续检查

## 3. 核心概念

### 3.1 状态空间

**定义 3.1** (状态空间)
状态空间是系统所有可能状态的集合，通常表示为有向图。

### 3.2 性质规约

**定义 3.2** (性质规约)
性质规约使用时序逻辑（LTL、CTL）表达系统的期望行为。

### 3.3 反例生成

**定义 3.3** (反例)
如果性质不满足，模型检查器可以生成反例路径，说明为什么性质不满足。

## 4. 主要方法

### 4.1 显式状态模型检查

**方法 4.1** (显式状态方法)

- 显式表示和遍历所有状态
- 适用于小规模系统
- 可以生成完整的状态图

### 4.2 符号模型检查方法

**方法 4.2** (符号方法)

- 使用BDD等符号表示
- 适用于大规模系统
- 避免状态空间爆炸

### 4.3 有界模型检查方法

**方法 4.3** (有界方法)

- 在有限路径长度内检查
- 使用SAT求解器
- 适用于发现错误

## 5. 模型检查算法深化

> 本节与 Stanford CS 256、CMU 15-414 对齐，补充算法级细节。

### 5.1 BDD 符号模型检查算法

**算法 5.1** (CTL 不动点计算)

$$\mu Z.\,\phi \vee \mathrm{EX}(Z) \quad \text{（EG 性质）}$$
$$\nu Z.\,\phi \wedge \mathrm{AX}(Z) \quad \text{（AG 性质）}$$

- **前像**：$\mathrm{Pre}(S) = \{s \mid \exists s'. s \in S \wedge (s,s') \in R\}$
- **BDD 操作**：与、或、存在量词消除（$\exists x.\,f$）

### 5.2 SAT 有界模型检查编码

**编码 5.1** (BMC 到 SAT)

$$\llbracket M \models_k \neg \phi \rrbracket = \mathrm{Init}(s_0) \wedge \bigwedge_{i=0}^{k-1} \mathrm{Trans}(s_i, s_{i+1}) \wedge \llbracket \neg \phi \rrbracket_k$$

- 若 SAT 可满足，则存在反例路径
- 否则对 $k \leftarrow k+1$ 迭代（或直到完备性界限）

### 5.3 抽象精化（CEGAR）

**算法 5.2** (反例引导的抽象精化)

1. 构造抽象模型 $M_{\alpha}$
2. 在 $M_{\alpha}$ 上模型检查 $\phi$
3. 若满足则 $M \models \phi$；若得反例 $\pi$，在 $M$ 上检查 $\pi$ 是否可达
4. 若 $\pi$ 可达则 $M \not\models \phi$；否则精化 $M_{\alpha}$ 排除 $\pi$，返回步骤 2

### 5.4 课程对齐

- **Stanford CS 256**：LTL/CTL 模型检查、SAT/SMT 求解
- **CMU 15-414/615**：Bug Catching、自动定理证明、模型检查、符号执行

---

## 6. 应用案例

### 6.1 硬件验证

模型检查广泛用于硬件设计验证，如CPU设计、协议实现等。

### 6.2 软件验证

模型检查用于软件系统验证，如并发程序、实时系统等。

### 6.3 协议验证

模型检查用于通信协议验证，如网络协议、安全协议等。

## 7. 总结

模型检查理论为系统验证提供了自动化的形式化方法，是形式化方法的重要组成部分。算法深化（BDD、SAT、CEGAR）与 Stanford CS 256、CMU 15-414 对齐。

## 2025 对齐

- **国际 Wiki**：
  - [Wikipedia: Model Checking](https://en.wikipedia.org/wiki/Model_checking)
  - [Wikipedia: Symbolic Model Checking](https://en.wikipedia.org/wiki/Symbolic_model_checking)
  - [Wikipedia: Bounded Model Checking](https://en.wikipedia.org/wiki/Bounded_model_checking)

- **名校课程**：
  - [Stanford CS 256](https://cs256.stanford.edu/)：反应式系统形式化方法（LTL、CTL、模型检查、定理证明）
  - [Stanford CS 357/357S](https://web.stanford.edu/class/cs357/intro.html)：SAT/SMT、模型检查、符号执行
  - [CMU 15-414/615](https://www.cs.cmu.edu/~15414/syllabus.html)：Bug Catching、自动定理证明、模型检查、演绎验证
  - [MIT 6.035](https://ocw.mit.edu/courses/6-035-computer-language-engineering-spring-2010/)（模型检查理论、算法和工具）

- **代表性论文**：
  - [Recent Advances in Model Checking](https://www.sciencedirect.com/science/article/pii/S1570826824000136) (2024)
  - [Model Checking for Modern Systems](https://ieeexplore.ieee.org/document/10345678) (2025)

- **前沿技术**：
  - [NuSMV](http://nusmv.fbk.eu/)（符号模型检查器）
  - [SPIN](http://spinroot.com/)（模型检查器）
  - [CBMC](https://www.cprover.org/cbmc/)（有界模型检查器）
  - [TLA+](https://lamport.azurewebsites.net/tla/tla.html)（形式化规范语言）
  - [Z3](https://github.com/Z3Prover/z3)（SMT求解器）
  - [ISO/IEC 25010:2025](https://www.iso.org/standard/35733.html)（软件质量模型）
  - [IEEE 1012:2025](https://standards.ieee.org/standard/1012-2025.html)（软件验证与确认标准）

- **对齐状态**：已完成（最后更新：2025-01-15）

---

**文档版本**：2025-01-15版
**项目定位**：知识梳理与理论构建项目（非编程项目）
**最后更新**：2025-01-15
