# 实验设计框架

[返回总论](./00-实证研究与验证总论.md) | [返回增强总论](../00-理论增强与完善总论.md)

> **重要声明**：
>
> - **项目定位**：本项目为"知识梳理与理论构建项目（非编程项目）"，专注于形式化架构理论体系的整理、构建和统一。
> - **文档目标**：本文档提供实证研究的实验设计框架，包括对照实验设计、控制变量、统计检验等。

## 目录

- [实验设计框架](#实验设计框架)
  - [目录](#目录)
  - [1. 实验设计概述](#1-实验设计概述)
    - [1.1 实验类型](#11-实验类型)
    - [1.2 实验目标](#12-实验目标)
  - [2. 实验设计](#2-实验设计)
    - [2.1 实验组和对照组](#21-实验组和对照组)
    - [2.2 控制变量](#22-控制变量)
    - [2.3 测量指标](#23-测量指标)
  - [3. 统计检验](#3-统计检验)
    - [3.1 假设检验](#31-假设检验)
    - [3.2 显著性水平](#32-显著性水平)
    - [3.3 效应量](#33-效应量)
  - [4. 实验流程](#4-实验流程)
    - [4.1 实验准备](#41-实验准备)
    - [4.2 实验执行](#42-实验执行)
    - [4.3 数据分析](#43-数据分析)
  - [2025 对齐](#2025-对齐)

## 1. 实验设计概述

### 1.1 实验类型

**实验类型**：对照实验（Controlled Experiment）

**实验设计**：随机对照实验（Randomized Controlled Trial, RCT）

**实验目的**：验证语义驱动架构相对于传统架构的优势

### 1.2 实验目标

**目标1：验证理论预测**:

- 验证"语义驱动架构提升开发效率"的预测
- 验证"语义驱动架构降低技术债务"的预测
- 验证"语义驱动架构增强系统弹性"的预测

**目标2：量化改进效果**:

- 量化开发时间减少的幅度
- 量化技术债务降低的幅度
- 量化系统弹性提升的幅度

## 2. 实验设计

### 2.1 实验组和对照组

**实验组（Treatment Group）**：

- 使用语义驱动架构的项目
- 使用SMDD方法进行设计和开发
- 使用DSL定义业务语义模型

**对照组（Control Group）**：

- 使用传统架构的项目
- 使用传统方法（如MVC、微服务）进行设计和开发
- 使用代码直接实现业务逻辑

**随机分配**：

- 项目随机分配到实验组或对照组
- 确保两组在项目规模、团队经验等方面相似

### 2.2 控制变量

**控制变量**（需要保持一致）：

| 变量 | 控制方法 | 说明 |
|------|---------|------|
| **项目规模** | 选择相似规模的项目 | 代码行数、功能点数 |
| **团队经验** | 匹配团队经验水平 | 平均工作年限、技能水平 |
| **技术栈** | 使用相同技术栈 | Java、Spring Boot等 |
| **业务复杂度** | 选择相似复杂度的业务 | 业务规则数量、集成复杂度 |
| **开发周期** | 相同的时间限制 | 3个月、6个月等 |

**独立变量**（实验变量）：

- **架构方法**：语义驱动架构 vs 传统架构

**因变量**（测量指标）：

- 开发时间（$T_{c2c}$）
- 技术债务密度（$D_{debt}$）
- 代码冗余率（$R_{dup}$）
- 故障恢复时间（$T_{recovery}$）

### 2.3 测量指标

**指标1：概念到代码时间（$T_{c2c}$）**

$$T_{c2c} = \text{需求评审结束到可运行代码的小时数}$$

**测量方法**：

- 记录需求评审结束时间
- 记录第一个可运行版本完成时间
- 计算时间差

**指标2：技术债务密度（$D_{debt}$）**

$$D_{debt} = \frac{\text{SonarQube债务分钟数}}{\text{千行代码}}$$

**测量方法**：

- 使用SonarQube扫描代码
- 计算技术债务分钟数
- 除以代码行数（千行）

**指标3：代码冗余率（$R_{dup}$）**

$$R_{dup} = \frac{\text{重复代码块数}}{\text{总代码块数}} \times 100\%$$

**测量方法**：

- 使用代码重复检测工具（如PMD）
- 统计重复代码块数
- 计算冗余率

**指标4：故障恢复时间（$T_{recovery}$）**

$$T_{recovery} = \text{故障检测到服务恢复的中位分钟数}$$

**测量方法**：

- 记录故障检测时间
- 记录服务恢复时间
- 计算中位数

## 3. 统计检验

### 3.1 假设检验

**零假设（$H_0$）**：

- $H_0$：语义驱动架构与传统架构在开发效率上无显著差异
- $H_0$：语义驱动架构与传统架构在技术债务上无显著差异

**备择假设（$H_1$）**：

- $H_1$：语义驱动架构的开发效率显著高于传统架构
- $H_1$：语义驱动架构的技术债务显著低于传统架构

**检验方法**：

- **t检验**：比较两组均值差异
- **Mann-Whitney U检验**：非参数检验（当数据不满足正态分布时）

### 3.2 显著性水平

**显著性水平**：$\alpha = 0.05$

**解释**：

- 如果 $p < 0.05$，拒绝零假设，认为有显著差异
- 如果 $p \geq 0.05$，接受零假设，认为无显著差异

**置信区间**：95%置信区间

### 3.3 效应量

**效应量（Effect Size）**：Cohen's d

$$d = \frac{\bar{x}_1 - \bar{x}_2}{s_{pooled}}$$

其中：

- $\bar{x}_1$：实验组均值
- $\bar{x}_2$：对照组均值
- $s_{pooled}$：合并标准差

**效应量解释**：

- $d < 0.2$：小效应
- $0.2 \leq d < 0.5$：中等效应
- $0.5 \leq d < 0.8$：大效应
- $d \geq 0.8$：非常大效应

## 4. 实验流程

### 4.1 实验准备

**步骤1：项目选择**:

- 选择10-20个相似规模的项目
- 随机分配到实验组和对照组

**步骤2：团队培训**:

- 实验组：培训SMDD方法和DSL使用
- 对照组：使用传统方法（无需额外培训）

**步骤3：工具准备**:

- 实验组：准备DSL工具链（Xtext、生成器等）
- 对照组：准备传统开发工具（IDE、框架等）

### 4.2 实验执行

**步骤1：需求分析**:

- 两组使用相同需求文档
- 记录需求分析时间

**步骤2：设计和开发**:

- 实验组：使用SMDD方法，先定义DSL模型，再生成代码
- 对照组：使用传统方法，直接编写代码

**步骤3：测试和部署**:

- 两组使用相同的测试标准
- 记录测试通过率和部署时间

### 4.3 数据分析

**步骤1：数据收集**:

- 收集所有测量指标的数据
- 检查数据完整性和准确性

**步骤2：描述性统计**:

- 计算均值、中位数、标准差
- 绘制箱线图、直方图

**步骤3：推断性统计**:

- 进行假设检验
- 计算效应量和置信区间

**步骤4：结果解释**:

- 解释统计检验结果
- 讨论实际意义和局限性

## 2025 对齐

- **国际 Wiki**：
  - [Wikipedia: Design of experiments](https://en.wikipedia.org/wiki/Design_of_experiments)
  - [Wikipedia: Randomized controlled trial](https://en.wikipedia.org/wiki/Randomized_controlled_trial)
  - [Wikipedia: Statistical hypothesis testing](https://en.wikipedia.org/wiki/Statistical_hypothesis_testing)

- **名校课程**：
  - [MIT 6.033: Computer Systems Engineering](https://web.mit.edu/6.033/www/)（系统评估）
  - [Stanford CS 347: Parallel and Distributed Data Management](https://web.stanford.edu/class/cs347/)（数据管理）

- **代表性论文**：
  - [Empirical Studies in Software Architecture](https://dl.acm.org/doi/10.1145/3622878.3622902) (2024)
  - [Experimental Design for Model-Driven Development](https://ieeexplore.ieee.org/document/10345710) (2024)

- **前沿技术**：
  - [R](https://www.r-project.org/)（统计分析工具）
  - [Python scipy](https://scipy.org/)（科学计算库）

- **对齐状态**：已完成（最后更新：2025-01-15）

---

**文档版本**：v1.1
**最后更新**：2025-01-15
**维护状态**：✅ 持续更新中
